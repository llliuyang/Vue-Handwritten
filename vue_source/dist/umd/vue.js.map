{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/utils/defineProperty.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/utils/proxy.js","../../src/utils/nextTick.js","../../src/observer/watcher.js","../../src/initState.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/utils/mergeOptions.js","../../src/init.js","../../src/utils/isReservedTag.js","../../src/vdom/index.js","../../src/global-api/extend.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["let oldArrayProtoMethods = Array.prototype;\r\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\r\nlet methods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'reverse',\r\n  'sort',\r\n  'splice'\r\n]\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    let result = oldArrayProtoMethods[method].apply(this, args);\r\n    let inserted;\r\n    let ob = this.__ob__;\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break;\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (inserted) ob.observeArray(inserted);\r\n\r\n    ob.dep.notify();\r\n    return result;\r\n  }\r\n})","export function defineProperty(target,key,value){\r\n  Object.defineProperty(target,key,{\r\n    enumerable:false,\r\n    configurable:false,\r\n    value\r\n  })\r\n}","let id = 0;\r\nclass Dep {\r\n  constructor() {\r\n    this.subs = [];\r\n    this.id = id++\r\n  }\r\n  depend() {\r\n    Dep.target.addDep(this)\r\n    // this.subs.push(Dep.target)\r\n  }\r\n  notify() {\r\n    this.subs.forEach(watcher => watcher.update())\r\n  }\r\n\r\n  addSub(watcher) {\r\n    this.subs.push(watcher);\r\n  }\r\n}\r\nDep.target = null;\r\nlet stack = [];\r\nexport function pushTarget(watcher) {\r\n  Dep.target = watcher;\r\n  stack.push(watcher)\r\n}\r\n\r\nexport function popTarget() {\r\n  stack.pop();\r\n  Dep.target = stack[stack.length-1];\r\n}\r\n\r\nexport default Dep","import { arrayMethods } from './array'\r\nimport { defineProperty } from '../utils/defineProperty';\r\nimport Dep from './dep';\r\n\r\nclass Observer {\r\n  constructor(value) {\r\n    this.dep = new Dep();\r\n    defineProperty(value, '__ob__', this)\r\n\r\n    if (Array.isArray(value)) {  // 当value是数组时\r\n      value.__proto__ = arrayMethods; //重写数组原型方法\r\n      this.observeArray(value);\r\n    } else { // 当value是对象时\r\n      this.walk(value);\r\n    }\r\n  }\r\n  walk(data) {   // 数据是对象时的操作\r\n    let keys = Object.keys(data);\r\n    keys.forEach(key => {\r\n      difineReactive(data, key, data[key]);\r\n    })\r\n  }\r\n  observeArray(data) {  // 数据是数组时的操作\r\n    data.forEach(item => {\r\n      observe(item)\r\n    })\r\n  }\r\n}\r\n\r\nfunction difineReactive(data, key, value) {\r\n  let childDep = observe(value);\r\n  let dep = new Dep();\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      if (Dep.target) {\r\n        dep.depend();\r\n        if(childDep){\r\n          childDep.dep.depend();\r\n        }\r\n      }\r\n      return value;\r\n    },\r\n    set(newValue) {\r\n      if (newValue === value) return;\r\n      observe(newValue);\r\n      value = newValue;\r\n\r\n      dep.notify();\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n  // 若data不是对象 或者data是null    typeof null === 'object'\r\n  if (typeof data !== 'object' || data == null) {\r\n    return;\r\n  };\r\n  if (data.__ob__) {\r\n    return data;\r\n  }\r\n  return new Observer(data); //data是对象\r\n\r\n}","export function proxy(vm,attr,key){\r\n  Object.defineProperty(vm,key,{\r\n    get(){\r\n      return vm[attr][key]\r\n    },\r\n    set(newValue){\r\n      vm[attr][key] = newValue\r\n    }\r\n  })\r\n}","const callbacks = [];\r\nlet pending = false;\r\nfunction flushCallbacks() {\r\n  while(callbacks.length){\r\n    let cb = callbacks.pop();\r\n    cb();\r\n  }\r\n  pending = false;\r\n}\r\n\r\nlet timerFunc;\r\nif (Promise) {\r\n  timerFunc = () => {\r\n    Promise.resolve().then(flushCallbacks);\r\n  }\r\n} else if (MutationObserver) {\r\n  let observe = new MutationObserver(flushCallbacks);\r\n  let textNode = document.createTextNode(1);\r\n  observe.observe(textNode, { characterData: true });\r\n  timerFunc = () => {\r\n    textNode.textContent = 2;\r\n  }\r\n} else if (setImmdiate) {\r\n  timerFunc = () => {\r\n    setImmdiate(flushCallbacks)\r\n  }\r\n} else {\r\n  timerFunc = () => {\r\n    setTimeout(flushCallbacks);\r\n  }\r\n}\r\n\r\nexport function nextTick(cb) {\r\n  callbacks.push(cb);\r\n  if(!pending){\r\n    timerFunc();\r\n    pending = true;\r\n  }\r\n}","import { pushTarget, popTarget } from \"./dep\";\r\nimport { nextTick } from \"../utils/nextTick\";\r\n\r\nlet id = 0;\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, cb, options) {\r\n    this.vm = vm;\r\n    this.exprOrFn = exprOrFn;\r\n    this.cb = cb;\r\n    this.options = options;\r\n    this.id = id++;\r\n    this.deps = [];\r\n    this.depsId = new Set();\r\n    this.user = options.user;\r\n    this.lazy = options.lazy;\r\n    this.dirty = this.lazy;\r\n\r\n    if (typeof exprOrFn == 'function') {\r\n      this.getter = exprOrFn;\r\n    } else {\r\n      this.getter = function () {\r\n        let path = exprOrFn.split('.');\r\n        let obj = vm;\r\n        for (let i = 0; i < path.length; i++) {\r\n          obj = obj[path[i]];\r\n        }\r\n        return obj\r\n      }\r\n    }\r\n    this.value = this.lazy ? void 0 : this.get();\r\n  }\r\n  addDep(dep) {\r\n    let id = dep.id;\r\n    if (!this.depsId.has(id)) {\r\n      this.deps.push(dep);\r\n      this.depsId.add(id);\r\n      dep.addSub(this);\r\n    }\r\n\r\n  }\r\n  get() {\r\n    pushTarget(this);\r\n    let result = this.getter.call(this.vm);\r\n    popTarget();\r\n    return result;\r\n  }\r\n  update() {\r\n    if (this.lazy) {\r\n      this.dirty = true\r\n    } else {\r\n      queueWatcher(this)\r\n    }\r\n  }\r\n  run() {\r\n    let newValue = this.get();\r\n    let oldValue = this.value;\r\n    this.value = newValue;\r\n    if (this.user) {\r\n      this.cb.call(this.vm, newValue, oldValue)\r\n    }\r\n  }\r\n  evaluate() {\r\n    this.value = this.get();\r\n    this.dirty = false;\r\n  }\r\n  depend(){\r\n    let i = this.deps.length;\r\n    while(i--){\r\n      this.deps[i].depend()\r\n    }\r\n  }\r\n}\r\n\r\nlet queue = [];\r\nlet has = {};\r\nlet pending = false;\r\nfunction queueWatcher(Watcher) {\r\n  const id = Watcher.id;\r\n  if (has[id] == null) {\r\n    queue.push(Watcher);\r\n    has[id] = true\r\n    if (!pending) {\r\n      nextTick(flushSchedulerQueue);\r\n      pending = true;\r\n    }\r\n  }\r\n}\r\n\r\nfunction flushSchedulerQueue() {\r\n  setTimeout(() => {\r\n    queue.forEach(watcher => {\r\n      watcher.run();\r\n      if (!watcher.user) {\r\n        watcher.cb()\r\n      }\r\n    });\r\n    queue = [];\r\n    has = {};\r\n    pending = false;\r\n  }, 0);\r\n}\r\nexport default Watcher","import { observe } from \"./observer/index\";\r\nimport { proxy } from \"./utils/proxy\";\r\nimport { nextTick } from \"./utils/nextTick\";\r\nimport Watcher from \"./observer/watcher\";\r\nimport Dep from \"./observer/dep\";\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options;\r\n  if (opts.props) {\r\n    initProps(vm)\r\n  }\r\n  if (opts.methods) {\r\n    initMethods(vm)\r\n  }\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm)\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm)\r\n  }\r\n}\r\n\r\nfunction initProps() { }\r\nfunction initMethods() { }\r\nfunction initData(vm) {\r\n  let data = vm.$options.data;\r\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data;\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n  observe(data);\r\n}\r\n\r\nfunction initComputed(vm) {\r\n  let computed = vm.$options.computed;\r\n  let watchers = vm._computedWatchers = {};\r\n  for (let key in computed) {\r\n    let userDef = computed[key];\r\n    let getter = typeof userDef === 'function' ? userDef : userDef.get;\r\n    watchers[key] = new Watcher(vm, getter, () => { }, { lazy: true });\r\n    defineComputed(vm, key, userDef);\r\n  }\r\n}\r\nfunction defineComputed(target, key, userDef) {\r\n  const sharePropertyDefinition = {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get: () => { },\r\n    set: () => { }\r\n  };\r\n  if (typeof userDef == 'function') {\r\n    sharePropertyDefinition.get = createComputedGetter(key);\r\n  } else {\r\n    sharePropertyDefinition.get = createComputedGetter(key);\r\n    sharePropertyDefinition.set = userDef.set;\r\n  }\r\n  Object.defineProperty(target, key, sharePropertyDefinition)\r\n}\r\nfunction createComputedGetter(key) {\r\n  return function () {\r\n    const watcher = this._computedWatchers[key];\r\n    if (watcher) {\r\n      if (watcher.dirty) {\r\n        watcher.evaluate()\r\n      }\r\n      if(Dep.target){\r\n        watcher.depend();\r\n      }\r\n      return watcher.value;\r\n    }\r\n  }\r\n}\r\n\r\nfunction initWatch(vm) {\r\n  let watch = vm.$options.watch;\r\n  for (let key in watch) {\r\n    const handler = watch[key];\r\n\r\n    if (Array.isArray(handler)) {\r\n      handler.forEach(handle => {\r\n        createWatcher(vm, key, handle);\r\n      })\r\n    } else {\r\n      createWatcher(vm, key, handler);\r\n    }\r\n  }\r\n}\r\n\r\nfunction createWatcher(vm, exprOrFn, handler, options) {\r\n  if (typeof handler === 'object') {\r\n    options = handler;\r\n    handler = handler.handler;\r\n  }\r\n  if (typeof handler === 'string') {\r\n    handler = vm[handler]\r\n  }\r\n\r\n  return vm.$watch(exprOrFn, handler, options);\r\n}\r\n\r\nexport function stateMixin(Vue) {\r\n  Vue.prototype.$nextTick = function (cb) {\r\n    nextTick(cb);\r\n  };\r\n  Vue.prototype.$watch = function (exprOrFn, cb, options) {\r\n    let watcher = new Watcher(this, exprOrFn, cb, { ...options, user: true });\r\n    if (options.immediate) {\r\n      cb()\r\n    }\r\n  }\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;  // 匹配标签名\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\r\n\r\nexport function parseHTML(html){\r\n  function creatASTElement(tagName,attrs){\r\n    return {\r\n      tag:tagName,\r\n      attrs,\r\n      type:1,\r\n      children:[],\r\n      parent: null\r\n    }\r\n  }\r\n  let root,\r\n      currentParent,\r\n      stack = [];\r\n\r\n  function start(tagName,attrs){\r\n    let element = creatASTElement(tagName,attrs);\r\n    if(!root){\r\n      root = element;\r\n    }\r\n    currentParent = element;\r\n    stack.push(element);\r\n\r\n  }\r\n\r\n  function end(tagName){\r\n    let element = stack.pop();\r\n    currentParent = stack[stack.length-1];\r\n    if(currentParent){\r\n      element.parent = currentParent;\r\n      currentParent.children.push(element);  \r\n    }\r\n\r\n  }\r\n\r\n  function chars(text){\r\n    text = text.replace(/\\s/g,'');\r\n    if(text){\r\n      currentParent.children.push({\r\n        type:3,\r\n        text\r\n      })\r\n    }\r\n  }\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf('<');\r\n    if(textEnd == 0){ \r\n      let startTagMatch = parseStartTag();\r\n      if(startTagMatch){\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n        continue;\r\n      }\r\n\r\n      const endTagMatch = html.match(endTag);\r\n      if(endTagMatch){\r\n        end(endTagMatch[1]);\r\n        advance(endTagMatch[0].length);\r\n        continue;\r\n      }\r\n      break;\r\n    }\r\n\r\n    let text;\r\n    if(textEnd > 0){\r\n      text = html.substring(0,textEnd);\r\n    }\r\n    if(text){\r\n      chars(text);\r\n      advance(text.length);\r\n    }\r\n\r\n  }\r\n\r\n  function advance(n){\r\n    html = html.substring(n)\r\n  }\r\n\r\n  function parseStartTag(){\r\n    const start = html.match(startTagOpen);\r\n    if(start){\r\n      const match ={\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      advance(start[0].length);\r\n\r\n      let end,attr;\r\n      while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\r\n        match.attrs.push({ key:attr[1], value:attr[3] || attr[4] || attr[5] })\r\n        advance(attr[0].length);\r\n      }\r\n      \r\n      if(end){\r\n        advance(end[0].length);\r\n        return match;\r\n      }\r\n      \r\n    }\r\n    \r\n  }\r\n\r\n  return root;\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\n\r\nfunction gen(node){\r\n  if(node.type == 1){\r\n    return generate(node)\r\n  }else{\r\n    let text = node.text;\r\n    if(!defaultTagRE.test(text)){\r\n      return `_v(${JSON.stringify(text)})`;\r\n    }\r\n\r\n    let tokens = [];\r\n    let lastIndex = defaultTagRE.lastIndex = 0;\r\n    let match,index;\r\n    while(match = defaultTagRE.exec(text)){\r\n      index = match.index;\r\n      if(index > lastIndex){\r\n        tokens.push(JSON.stringify(text.slice(lastIndex,index)));\r\n      }\r\n\r\n      tokens.push(`_s(${match[1].trim()})`);\r\n      lastIndex = index + match[0].length;\r\n    }\r\n    if(lastIndex < text.length){\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    \r\n    return `_v(${tokens.join('+')})`;\r\n\r\n  }\r\n}\r\n\r\nfunction genChildren(el){\r\n  const children = el.children;\r\n  if(children){\r\n    return children.map(child=>gen(child)).join(',');\r\n  }else{\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction genProps(attrs){\r\n  let str = '';\r\n  for(let i = 0;i<attrs.length;i++){\r\n    let attr = attrs[i];\r\n    if(attr.key === 'style'){\r\n      let obj = {};\r\n      attr.value.split(';').forEach(item => {\r\n        let [key,value] = item.split(':');\r\n        obj[key] = value\r\n      });\r\n      attr.value = obj;\r\n    }\r\n\r\n    str += `${attr.key}:${JSON.stringify(attr.value)},`\r\n  }\r\n\r\n  return `{${str.slice(0,-1)}}`\r\n}\r\n\r\nexport function generate(el){\r\n  let children = genChildren(el);\r\n  let code = `_c('${el.tag}',${\r\n    el.attrs.length?`${genProps(el.attrs)}`:'undefined'\r\n  }${\r\n    children?`,${children}`:''\r\n  })`;\r\n\r\n  return code;\r\n}","import { parseHTML } from './parse'\r\nimport { generate } from './generate';\r\nexport function compileToFunction(template){\r\n  let ast = parseHTML(template);\r\n  let code = generate(ast);\r\n  let render =  new Function(`with(this){return ${code}}`);\r\n  return render; \r\n}","export function patch(oldVnode, vnode) {\r\n  if (!oldVnode) {\r\n    return createElm(vnode);\r\n  }\r\n\r\n  if (oldVnode.nodeType === 1) {\r\n    let el = createElm(vnode);\r\n    let parentElm = oldVnode.parentNode;\r\n    parentElm.insertBefore(el, oldVnode.nextSibling);\r\n    parentElm.removeChild(oldVnode);\r\n    return el;\r\n  } else {\r\n    if (oldVnode.tag !== vnode.tag) {\r\n      return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\r\n    }\r\n\r\n    if (!oldVnode.tag) {\r\n      if (oldVnode.text !== vnode.text) {\r\n        return oldVnode.el.textContent = vnode.text\r\n      }\r\n    }\r\n\r\n    let el = vnode.el = oldVnode.el\r\n    updateProperties(vnode, oldVnode.data);\r\n\r\n    let newChildren = vnode.children || [];\r\n    let oldChildren = oldVnode.children || [];\r\n    if (newChildren.length > 0 && oldChildren.length > 0) {\r\n      updateChildren(oldChildren, newChildren, el);\r\n    } else if (oldChildren.length > 0) {\r\n      el.innerHTML = '';\r\n    } else if (newChildren.length > 0) {\r\n      newChildren.forEach(child => {\r\n        el.appendChild(createElm(child));\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n\r\nfunction isSameVnode(oldVnode, newVnode) {\r\n  return (oldVnode.tag === newVnode.tag) && (oldVnode.key === newVnode.key);\r\n}\r\nfunction updateChildren(oldChildren, newChildren, parent) {\r\n  let oldStartIndex = 0;\r\n  let oldStartVnode = oldChildren[0];\r\n  let oldEndIndex = oldChildren.length - 1;\r\n  let oldEndVnode = oldChildren[oldEndIndex];\r\n  let newStartIndex = 0;\r\n  let newStartVnode = newChildren[0];\r\n  let newEndIndex = newChildren.length - 1;\r\n  let newEndVnode = newChildren[newEndIndex];\r\n\r\n  function makeIndexByKey(children) {\r\n    let map = {}\r\n    children.forEach((item, index) => {\r\n      if (item.key) {\r\n        map[item.key] = index;\r\n      }\r\n    })\r\n    return map;\r\n  }\r\n  let map = makeIndexByKey(oldChildren);\r\n\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n    if (!oldStartVnode) {\r\n      oldStartVnode = oldChildren[++oldStartIndex];\r\n    } else if (!oldEndVnode) {\r\n      oldEndVnode = oldChildren[--oldEndIndex];\r\n    } else if (isSameVnode(oldStartVnode, newStartVnode)) {\r\n      patch(oldStartVnode, newStartVnode);\r\n      oldStartVnode = oldChildren[++oldStartIndex];\r\n      newStartVnode = newChildren[++newStartIndex];\r\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) {\r\n      patch(oldEndVnode, newEndVnode);\r\n      oldEndVnode = oldChildren[--oldEndIndex];\r\n      newEndVnode = newChildren[--newEndIndex];\r\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) {\r\n      patch(oldStartVnode, newEndVnode);\r\n      parent.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling);\r\n      oldStartVnode = oldChildren[++oldStartIndex];\r\n      newEndVnode = newChildren[--newEndIndex];\r\n    } else if (isSameVnode(oldEndVnode, newStartVnode)) {\r\n      patch(oldEndVnode, newStartVnode);\r\n      parent.insertBefore(oldEndVnode.el, oldStartVnode.el)\r\n      oldEndVnode = oldChildren[--oldEndIndex];\r\n      newStartVnode = newChildren[++newStartIndex];\r\n    } else {\r\n      let moveIndex = map[newStartVnode.key];\r\n      if (moveIndex == undefined) {\r\n        parent.insertBefore(createElm(newStartVnode), oldStartVnode.el)\r\n      } else {\r\n        let moveVnode = oldChildren[moveIndex];\r\n        oldChildren[moveIndex] = null;\r\n        parent.insertBefore(moveVnode.el, oldStartVnode.el);\r\n        patch(moveVnode, newStartVnode);\r\n      }\r\n      newStartVnode = newChildren[++newStartIndex];\r\n    }\r\n  }\r\n\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n      // parent.appendChild(createElm(newChildren[i]))\r\n      let ele = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1].el;\r\n      parent.insertBefore(createElm(newChildren[i]), ele);\r\n    }\r\n  }\r\n\r\n  if (oldStartIndex <= oldEndIndex) {\r\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n      let child = oldChildren[i];\r\n      if (child != undefined) {\r\n        parent.removeChild(child.el);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nfunction createComponent(vnode) {\r\n  let i = vnode.data;\r\n  if ((i = i.hook) && (i = i.init)) {\r\n    i(vnode)\r\n  };\r\n  if(vnode.componentInstance){\r\n    return true;\r\n  }\r\n}\r\n\r\nexport function createElm(vnode) {\r\n  let { tag, data, key, children, text } = vnode;\r\n  if (typeof tag == 'string') {\r\n    if (createComponent(vnode)) {\r\n      return vnode.componentInstance.$el\r\n    }\r\n\r\n\r\n    vnode.el = document.createElement(tag);\r\n    updateProperties(vnode);\r\n    children.forEach(child => {\r\n      vnode.el.appendChild(createElm(child));\r\n    });\r\n  } else {\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n\r\n  return vnode.el;\r\n}\r\n\r\nfunction updateProperties(vnode, oldProps = {}) {\r\n  let el = vnode.el;\r\n  let newProps = vnode.data || {};\r\n\r\n  for (let key in oldProps) {\r\n    if (!newProps[key]) {\r\n      el.removeAttribute(key);\r\n    }\r\n  }\r\n\r\n  let newStyle = newProps.style || {};\r\n  let oldStyle = oldProps.style || {};\r\n  for (let key in oldStyle) {\r\n    if (!newStyle[key]) {\r\n      el.style[key] = '';\r\n    }\r\n  }\r\n\r\n  for (let key in newProps) {\r\n    if (key === 'style') {\r\n      for (let styleName in newProps.style) {\r\n        el.style[styleName] = newProps.style[styleName];\r\n      }\r\n    } else if (key == 'class') {\r\n      el.className = newProps.class;\r\n    } else {\r\n      el.setAttribute(key, newProps[key])\r\n    }\r\n  }\r\n}","import { patch } from \"./vdom/patch\";\r\nimport Watcher from \"./observer/watcher\";\r\n\r\nexport function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    const prevVnode = vm._vnode;\r\n    if (!prevVnode) {\r\n      vm.$el = patch(vm.$el, vnode);\r\n    } else {\r\n      vm.$el = patch(prevVnode, vnode);\r\n    }\r\n    vm._vnode = vnode;\r\n  }\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  vm.$el = el;\r\n  callHook(vm, 'beforeMount');\r\n  let updateComponent = () => {\r\n    vm._update(vm._render(el));\r\n  }\r\n  new Watcher(vm, updateComponent, () => {\r\n    callHook(vm, 'updated')\r\n  }, true);\r\n  callHook(vm, 'mounted');\r\n}\r\n\r\nexport function callHook(vm, hook) {\r\n  const handler = vm.$options[hook];\r\n  if (handler) {\r\n    for (let i = 0; i < handler.length; i++) {\r\n      handler[i].call(vm);\r\n    }\r\n  }\r\n}","export const LIFECYCLE_HOOKS = [\r\n  'beforeCreated',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed'\r\n]\r\nlet strats = {};\r\n// strats.data=function(parentValue,childValue){\r\n//   return childValue\r\n// };\r\n\r\nstrats.components = function(parentValue,childValue){\r\n  const res = Object.create(parentValue);\r\n  if(childValue){\r\n    for(let key in childValue){\r\n      res[key] = childValue[key];\r\n    }\r\n  }\r\n  return res;\r\n}\r\n// strats.watch=function(){};\r\n// strats.computed=function(){};\r\n\r\nfunction mergeHook(parentValue,childValue){\r\n  if(childValue){\r\n    if(parentValue){\r\n      return parentValue.concat(childValue)\r\n    }else{\r\n      return [childValue]\r\n    }\r\n  }else{\r\n    return parentValue;\r\n  }\r\n}\r\n\r\nLIFECYCLE_HOOKS.forEach(hook=>{\r\n  strats[hook] = mergeHook\r\n})\r\n\r\nexport function mergeOptions(parent,child){\r\n  let options = {};\r\n  for(let key in parent){\r\n    mergeFiled(key)\r\n  }\r\n\r\n  for(let key in child){\r\n    if(!parent.hasOwnProperty(key)){\r\n      mergeFiled(key)\r\n    }\r\n  }\r\n\r\n  function mergeFiled(key){\r\n    if(strats[key]){\r\n      options[key] = strats[key](parent[key],child[key])\r\n    }else{\r\n      if(typeof parent[key] == 'object' && typeof child[key] == 'object'){\r\n        options[key] = {...parent[key],...child[key]}\r\n      }else{\r\n        if(child[key]){\r\n          options[key] = child[key];\r\n        }else{\r\n          options[key] = parent[key];\r\n        }\r\n        \r\n      } \r\n    }\r\n  }\r\n  return options;\r\n}","import { initState } from \"./initState\";\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { mountComponent, callHook } from \"./lifecycle\";\r\nimport { mergeOptions } from \"./utils/mergeOptions\";\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    vm.$options = mergeOptions(vm.constructor.options, options);\r\n\r\n    callHook(vm, 'beforeCreate');\r\n    //初始化状态\r\n    initState(vm);\r\n\r\n    callHook(vm, 'created');\r\n\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    const options = vm.$options;\r\n    el = document.querySelector(el);\r\n\r\n    if (!options.render) {\r\n      let template = options.template;\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n\r\n      const render = compileToFunction(template);\r\n      options.render = render;\r\n    }\r\n\r\n    mountComponent(vm, el);\r\n  }\r\n}\r\n\r\n","function makeMap(str) {\r\n  const mapping = {};\r\n  const list = str.split(',');\r\n  list.forEach(item => {\r\n    mapping[item] = true;\r\n  });\r\n  return (key) => {\r\n    return mapping[key];\r\n  }\r\n}\r\n\r\nexport const isReservedTag = makeMap(\r\n  'a,p,i,b,s,ul,li,ol,em,br,th,tr,td,dl,dt,dd,hr,h1,h2,h3,h4,h5,h6,div,img,sup,sub,kbd,nav,big,bdi,bdo,code,span,link,font,form,meta,body,cite,audio,title,table,header,textarea,strong,button,input,thead,tbody,tfoot,aside,label,video,small,select,source,section,script,option,footer,canvas,legend,filedset'\r\n)","import { isReservedTag } from \"../utils/isReservedTag\";\r\n\r\nexport function renderMixin(Vue) {\r\n  Vue.prototype._c = function () {\r\n    return createElement(this, ...arguments);\r\n  }\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val;\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    return createTextVnode(text);\r\n  }\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    const render = vm.$options.render;\r\n    let vnode = render.call(vm);\r\n    return vnode;\r\n  }\r\n}\r\n\r\nfunction createElement(vm, tag, data = {}, ...children) {\r\n  if (isReservedTag(tag)) {\r\n    return vnode(tag, data, data.key, children);\r\n  } else {\r\n    let Ctor = vm.$options.components[tag];\r\n    return createComponent(vm, tag, data, data.key, children, Ctor);\r\n  }\r\n\r\n}\r\n\r\nfunction createComponent(vm, tag, data, key, children, Ctor) {\r\n  const baseCtor = vm.$options._base;\r\n  if (typeof Ctor == 'object') {\r\n    Ctor = baseCtor.extend(Ctor)\r\n  }\r\n  data.hook = {\r\n    init(vnode) { \r\n      let child = vnode.componentInstance = new Ctor({});\r\n      child.$mount();\r\n    }\r\n  };\r\n  return vnode(`vue-component-${Ctor.cid}-${tag}`, data, data.key, undefined, undefined, { Ctor, children })\r\n}\r\n\r\nfunction createTextVnode(text) {\r\n  return vnode(undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\nfunction vnode(tag, data, key, children, text, componentOptions) {\r\n  return {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text,\r\n    componentOptions\r\n  }\r\n}\r\n\r\n\r\n","import { mergeOptions } from \"../utils/mergeOptions\";\r\n\r\nexport function initExtend(Vue) {\r\n  let cid = 0;\r\n  Vue.extend = function (extendOptions) {\r\n    const Super = this;\r\n    const Sub = function VueComponent(options) {\r\n      this._init(options);\r\n    };\r\n    Sub.cid = cid++;\r\n    Sub.prototype = Object.create(Super.prototype);\r\n    Sub.prototype.constructor = Sub;\r\n    Sub.options = mergeOptions(Super.options, extendOptions);\r\n    Sub.components = Super.components;\r\n\r\n    return Sub;\r\n  }\r\n}","import { mergeOptions } from \"../utils/mergeOptions\";\r\nimport { initExtend } from \"./extend\";\r\n\r\nexport function initGlobalApi(Vue) {\r\n  Vue.options = {};\r\n  Vue.mixin = function (mixin) {\r\n    this.options = mergeOptions(this.options, mixin);\r\n  }\r\n\r\n  initExtend(Vue);\r\n\r\n  Vue.options._base = Vue;\r\n  Vue.options.components = {};\r\n  Vue.component = function (id, definition) {\r\n    definition.name = definition.name || id;\r\n    definition = this.options._base.extend(definition);\r\n    Vue.options.components[id] = definition;\r\n  }\r\n}","import { initMixin } from \"./init\"\r\nimport { lifecycleMixin } from \"./lifecycle\";\r\nimport { renderMixin } from \"./vdom/index\";\r\nimport { initGlobalApi } from \"./global-api/index\";\r\nimport { stateMixin } from \"./initState\";\r\nfunction Vue(options) {\r\n  this._init(options);\r\n}\r\ninitMixin(Vue);\r\nlifecycleMixin(Vue);\r\nrenderMixin(Vue);\r\nstateMixin(Vue);\r\n\r\ninitGlobalApi(Vue);\r\n\r\nexport default Vue"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","dep","notify","defineProperty","target","key","value","enumerable","configurable","id","Dep","subs","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","Observer","isArray","__proto__","walk","data","keys","difineReactive","item","observe","childDep","get","depend","set","newValue","proxy","vm","attr","callbacks","pending","flushCallbacks","cb","timerFunc","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","characterData","textContent","setImmdiate","setTimeout","nextTick","Watcher","exprOrFn","options","deps","depsId","Set","user","lazy","dirty","getter","path","split","obj","i","has","add","addSub","call","queueWatcher","oldValue","queue","flushSchedulerQueue","run","initState","opts","$options","props","initData","computed","initComputed","watch","initWatch","_data","watchers","_computedWatchers","userDef","defineComputed","sharePropertyDefinition","createComputedGetter","evaluate","handler","handle","createWatcher","$watch","stateMixin","Vue","$nextTick","immediate","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","creatASTElement","tagName","attrs","tag","type","children","parent","root","currentParent","start","element","end","chars","text","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","defaultTagRE","gen","node","generate","test","JSON","stringify","tokens","lastIndex","index","exec","trim","join","genChildren","el","map","child","genProps","str","code","compileToFunction","template","ast","render","Function","patch","oldVnode","vnode","createElm","nodeType","parentElm","parentNode","insertBefore","nextSibling","removeChild","replaceChild","updateProperties","newChildren","oldChildren","updateChildren","innerHTML","appendChild","isSameVnode","newVnode","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","makeIndexByKey","moveIndex","undefined","moveVnode","ele","createComponent","hook","init","componentInstance","$el","createElement","oldProps","newProps","removeAttribute","newStyle","style","oldStyle","styleName","className","setAttribute","lifecycleMixin","_update","prevVnode","_vnode","mountComponent","callHook","updateComponent","_render","LIFECYCLE_HOOKS","strats","components","parentValue","childValue","res","mergeHook","concat","mergeOptions","mergeFiled","hasOwnProperty","initMixin","_init","constructor","$mount","querySelector","outerHTML","makeMap","mapping","list","isReservedTag","renderMixin","_c","arguments","_s","val","_v","createTextVnode","Ctor","baseCtor","_base","extend","cid","componentOptions","initExtend","extendOptions","Super","Sub","VueComponent","initGlobalApi","mixin","component","definition","name"],"mappings":"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"}